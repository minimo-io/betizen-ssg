{# _includes/layouts/base.njk #}
<!doctype html>
<html lang="{{ page.lang }}" dir="{{ languages[page.lang].dir or 'ltr' }}" data-theme="{{ config.theme }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">


        <title>{{ pageTitle | safe  or title |Â safe }}</title>

        {%- if description -%}<meta name="description" content="{{ description }}">{% endif %}
        <meta name="robots" content="index,follow" />

                {% set google_locale = page.lang %}
        {% if google_locale == 'pt-br' %}{% set google_locale = 'pt-BR' %}{% endif %}
        <script src="https://accounts.google.com/gsi/client?hl={{ google_locale }}" defer></script>

        {# Ahrefs #}
        <script src="https://analytics.ahrefs.com/analytics.js" data-key="VRg+mahyNzTg8SI7FZIBjg" async></script>
        

        <link rel="shortcut icon" href="/assets/favs/favicon.ico">
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/favs/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/favs/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/favs/favicon-16x16.png">

        <link rel="alternate" hreflang="{{ page.lang }}" href="{{ metadata.url }}{{ page.url }}" />
        {%- for link in page.url | locale_links %}
            <link rel="alternate" hreflang="{{ link.lang }}" href="{{ metadata.url }}{{ link.url }}" />
        {%- endfor %}
        <link rel="alternate" hreflang="x-default" href="{{ metadata.url }}{{ page.url | locale_url('es') }}"/>
        <link rel="canonical" href="{{ metadata.url }}{{ page.url }}"/>


        {#- Atom and JSON feeds included by default #}
        <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="{{ metadata.title }}">
        <link rel="alternate" href="/feed/feed.json" type="application/json" title="{{ metadata.title }}">

        {# <link rel="dns-prefetch" href="//fonts.googleapis.com/" /> #}
        <link rel="dns-prefetch" href="//unpkg.com/" />
        <link rel="dns-prefetch" href="//cdn.jsdelivr.net/" />
        <link rel="dns-prefetch" href="//cdnjs.cloudflare.com/" />

        {# Tailwind / DaisyUI #}
        <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
        {# <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script> #}
        <link rel="stylesheet" href="{{ '/assets/app.css' | url }}">
        <link href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css" rel="stylesheet" type="text/css" />
 
        {# Flickity  #}
        <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
        <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

        {# Lucide icons #}
        <script src="https://unpkg.com/lucide@latest" defer></script>

        {# Animate #}
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
        />


        {# {%- css %}
            {% include "public/css/app.css" %}
        {% endcss %} #}

        <script>
            window.i18n = {{ languages | dump | safe }};
            window.currentLang = '{{ page.lang }}';
            window.c = { log: console.log.bind(console) };

            (function() {
                const savedTheme = localStorage.getItem('bz_theme') || 'cmyk';
                document.documentElement.setAttribute('data-theme', savedTheme);
            })();

        </script>
        {%- js %}
            {% include "public/js/core/state.js" %}
            {% include "public/js/core/api.js" %}
            {% include "public/js/modules/auth.js" %}
            {% include "public/js/modules/voting.js" %}

            {% include "public/js/toast.js" %}
            {% include "public/js/app.js" %}
        {% endjs %}

        <style>
            {% getBundle "css" %}
        </style>

        {# <link href='{% getBundleFileUrl "css" %}' rel="stylesheet" /> #}
        {#- Renders the CSS bundle using a separate file, if you can't set CSP directive style-src: 'unsafe-inline' #}
        {# <link rel="stylesheet" href="/{% getBundleFileUrl "css" %}"> #}

        <script>
            {% getBundle "js" %}
        </script>
        {# <script src="{% getBundleFileUrl "js" %}"></script> #}

        {# Schema #}
        {# <script type="application/ld+json">
            [{"@context":"https://schema.org/","@type":"WebSite","@id":"https://www.betizen.org#website","headline":"Betizen","name":"Betizen","description":"{{description}}.","url":"https://www.betizen.org","potentialAction":{"@type":"SearchAction","target":"https://www.betizen.org?s={search_term_string}","query-input":"required name=search_term_string"}}]
        </script> #}

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-S9FEXZ8H3E"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-S9FEXZ8H3E');
        </script>
    </head>
    <body>

        <script type="text/javascript">window.onload = new function(){var hd = document.getElementsByTagName('head').item(0);var js = document.createElement('script'); js.setAttribute('language', 'javascript'); js.setAttribute('src', 'https://certify.gpwa.org/script/betizen.org/'); hd.appendChild(js); return false;}</script>

        {%- include "components/bz-message.njk" %}
        {%- include "components/bz-nav.njk" %}

        <main id="main">
            {{ content | safe }}
        </main>

        {%- include "components/bz-footer.njk" %}

        {# {%- include "components/schema.njk" -%} #}

        {# <div class="cookiePolicy d-none">
            <div class="cookieDescription"></div>
            <div>
                <button class="MuiButtonBase-root MuiButton-root muiButtonBase MuiButton-contained cookieAction MuiButton-containedSecondary muiButtonContainedSecondary" tabindex="0" type="button"><span class="MuiButton-label">Accept</span><span class="MuiTouchRipple-root"></span>
                </button>
            </div>
        </div> #}

        {# Modal #}
        <dialog id="bz_modal_1" class="modal">
        <div class="modal-box">
            <h3 class="text-lg font-bold"></h3>
            <div class="py-4 text-sm md:text-sm"></div>
            <div class="modal-action mt-0">
                <form method="dialog">
                    <!-- if there is a button in form, it will close the modal -->
                    {# <button onclick="setupAndShowModal({ title: '', body:''  }, false)" class="btn">{{ languages[page.lang].texts.close }}</button> #}
                    <button class="btn">{{ languages[page.lang].texts.close }}</button>
                </form>
            </div>
        </div>
        </dialog>

        {# Fixed Button #}
        <div class="chat chat-end fixed right-6 bottom-6 md:right-12 flex">
            {# <div class="w-fit">           
                <div class="chat-bubble w-[180px] chat-bubble-secondary bg-secondary/60 hover:bg-secondary hover:cursor-pointer text-white text-sm relative -top-2">
                    Fantastic game!
                </div>
                
                <div class="chat-footer opacity-50 ml-1 relative -top-1">Pepe G. at 12:46</div>
            </div> #}

            <button onclick="alert('{{languages[page.lang].texts.soon }}')" class="btn btn-lg md:btn-xl btn-secondary btn-circle shadow-lg">
                <i data-lucide="message-square-dot" strokeWidth={1} class="text-white"></i>
            </button>            
        </div>


    </body>
</html>
