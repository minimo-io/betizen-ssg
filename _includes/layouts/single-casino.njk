---
layout: layouts/base.njk
---

{%- from "macros/reputation-button.njk" import reputationButton with context -%}
{%- from "macros/karma-button.macro.njk" import karmaButton with context -%}

{%- set logoPath -%}{{ metadata.images.casinos }}{{ page.fileSlug }}-logo.webp{%- endset -%}
{%- set splashPath -%}{{ metadata.images.casinos }}{{ page.fileSlug }}-splash.webp{%- endset -%}

{# Js code for games #}
{%- js %}
    document.addEventListener("DOMContentLoaded", ()=>{

      const originalButton = document.querySelector('.bz-visit-site-button');
      const fixedButton = document.querySelector('.bz-visit-site-button-fixed');

      if (!originalButton || !fixedButton) return;

      const observer = new IntersectionObserver((entities)=>{
        entities.forEach(entry =>{

          if (!entry.isIntersecting){
            console.log("NOT Intersecting");
            fixedButton.classList.remove("hidden");
            fixedButton.classList.add("fixed");
            fixedButton.classList.add("animate__animated", "animate__tada");
          }else{
            fixedButton.classList.remove("fixed");
            fixedButton.classList.add("hidden");
            console.log("YES Intersecting");
          }

        });
      }, { threshold: 0 });

      observer.observe(originalButton);
    });
{% endjs %}

<!-- Casino Review Card -->
<div class="max-w-6xl mx-auto debug-container">
    <!-- Casino Review Card -->
    <div class="rounded-xl shadow-lg dark:shadow-none dark:border dark:border-gray-800">
        <!-- Background & Logo -->
        <div
          style="background-image: linear-gradient(to right, {{ gradient.start }}, {{ gradient.end }})"
          class="bg-red-200 h-20 relative rounded-t-lg">
            <!-- Casino logo container -->
            <div class="absolute -bottom-8 left-6">
                <div class="w-20 h-20 border-2 rounded-full border-white dark:border-[#1C232A] flex items-center justify-center shadow-lg">
                    <!-- Brand logo -->
                    <img
                      src="{{ metadata.images.casinos }}{{ page.fileSlug }}-logo.webp"
                      class="rounded-full"
                      alt="{{ slugOverride }}"
                      width="300"
                      height="300"
                    />
                </div>
            </div>

            <!-- Casino tag -->
            <div class="absolute top-4 right-6">
                <a href="{{ '/casinos/' | locale_url }}" class="bg-gray-600 text-white text-xs px-3 py-1 rounded">
                    {{ languages[page.lang].texts.backToList }}
                </a>
            </div>
        </div>

        <!-- Card content -->
        <div class="pt-12 pb-6 px-6">

            {% if blacklisted %}
            <div role="alert" class="alert alert-error alert-soft shadow-lg mb-4 rounded-lg">
                <i data-lucide="alert-octagon" class="hidden md:block w-6 h-6"></i>
                <div>
                    <h3 class="font-bold text-lg md:text-xl">Blacklisted</h3>
                    <div class="text-xs md:text-sm">
                    {% if blacklistedReason %}
                        {{ blacklistedReason }}
                    {% else %}
                        {{ languages[page.lang].texts.blacklistReason }}
                    {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Casino name and operator -->
            <div class="flex items-start justify-between md:mb-4">
                {# Title and operator #}
                <div class="prose prose-lg prose-p:mt-0 mb-2 md:mb-0">
                    <h1 class="text-2xl mb-1 flex gap-2 md:gap-3">
                        {{ title }}
                        {{ karmaButton("0") }}
                    </h1>
                    <p class="text-sm text-gray-500">
                      {{ languages[page.lang].texts.operatedBy }} {{ operator }}
                    </p>
                </div>

                <!-- Rating -->
                <div class="text-right">
                    <div class="flex md:top-auto relative items-center">
                        <span class="text-4xl font-bold text-gray-400">#{{ ranking }}
                        </span>
                        {# {{ karmaButton("0") }} #}
                    </div>
                </div>
            </div>

            <!-- Bottom section -->
            <div class="pt-3 border-t border-gray-100 dark:border-gray-700">
                <div class="flex items-center justify-between mb-3 border-b border-gray-100 dark:border-gray-700 pb-3">
                    <h3 class="text-gray-600 font-medium flex items-center flex-row">
                        <span class="hidden md:inline-block mr-3">{{ languages[page.lang].texts.vote }}:</span>
                        <div class="flex flex-row justify-center gap-2">
                            <button class="btn md:btn-md bg-transparent hover:bg-base-200 text-(--bz-green) text-neutral" onclick="alert('{{languages[page.lang].texts.soon }}')">
                                üëç&nbsp;+{{ config.karmaPoints }}
                            </button>
                            <button class="btn md:btn-md bg-transparent text-(--bz-red) hover:bg-base-200 text-neutral" onclick="alert('{{languages[page.lang].texts.soon }}')">
                                üëé&nbsp;-{{ config.karmaPoints }}
                            </button>
                        </div>
                    </h3>
                    <div class="flex gap-2">
                        <!-- Opinion button -->
                        <div class="hidden md:flex items-center gap-2 text-orange-500">
                          <div class="tooltip w-full" data-tip="{{ languages[page.lang].texts.earn }} +{{ config.karmaPoints * 2 }} {{ languages[page.lang].texts.points }}">
                              <button onclick="alert('{{languages[page.lang].texts.soon }}')" class="btn btn-soft btn-outline btn-secondary w-full font-semibold">
                                  <i data-lucide="pencil-line" strokeWidth={1} class="h-3"></i>
                                  {{ languages[page.lang].texts.leaveOpinion }}
                              </button>
                          </div>
                        </div>
                        <!-- Visit site button -->
                        {% if blacklisted %}
                            {# Casino is blacklisted, do not show the visit button. #}
                        {% else %}
                        <div class="flex items-center gap-2 text-orange-500">
                            {%- include "components/bz-visit-site-button.njk" -%}
                        </div>
                        {% endif %}
                    </div>

                </div>

                <!-- Mobile Opinion button -->
                <div class="md:hidden mb-3 items-center gap-2 text-orange-500">
                    <div class="tooltip w-full" data-tip="{{ languages[page.lang].texts.earn }} +{{ config.karmaPoints * 2 }} {{ languages[page.lang].texts.points }}">
                      <button onclick="alert('{{languages[page.lang].texts.soon }}')" class="btn btn-soft btn-outline btn-secondary w-full font-semibold">
                          <i data-lucide="pencil-line" strokeWidth={1} class="h-3"></i>
                          {{ languages[page.lang].texts.leaveOpinion }}
                      </button>
                    </div>
                </div>

                {# Details #}
                <div class="md:flex md:gap-6 debug-overflow">

                  {# Left Details #}
                  <div class="md:flex-1 debug-overflow">

                    {# Casino video - Mobile version #}
                    <div class="block md:hidden mb-4">
                        <div class="relative overflow-hidden rounded-lg">
                            {%- include "components/bz-youtube.njk" -%}
                        </div>
                    </div>

                    {# Ai overview #}
                    {%- include "components/bz-ai-overview.njk" -%}

                     {# Details #}
                    {%- include "components/casinos/casino-details.njk" -%}

                    {# Features #}
                    <div class="block md:hidden pt-3">
                      {%- include "components/casinos/casino-featured.njk" -%}
                    </div>

                    {# Bonus mobile #}
                    <div class="mb-3 block md:hidden">
                        {% if not bonus.title %}
                          {%- include "components/bz-banner-hero.njk" -%}
                         {% else %}
                          {%- include "components/casinos/casino-bonus.njk" -%}
                        {% endif %}
                    </div>

                    {# Content - Adding lots of content for testing #}
                    <div class="prose prose-neutral prose-sm md:prose-base mt-4 w-full max-w-full md:px-4 prose-headings:my-6">
                      {# <h2 class="mb-0">{{ languages[page.lang].texts.reviewOf }} {{ title }}</h2> #}
                      {{ content | safe }}

                    </div>

                  </div>

                  {# Right Details - DEBUG STICKY SIDEBAR #}
                  <aside class="md:w-80 md:flex-shrink-0">
                    <div class="sticky top-4 debug-sticky" style="position: sticky !important; top: 16px !important;">



                      {# Casino video - Desktop version #}
                      <div class="hidden md:block mb-4">
                          <div class="relative overflow-hidden rounded-lg">
                                {%- include "components/bz-youtube.njk" -%}
                          </div>
                      </div>


                      {# Features #}
                      <div class="hidden md:block mb-4">
                        {%- include "components/casinos/casino-featured.njk" -%}
                      </div>

                      {# Banner #}
                      {% if not blacklisted %}
                      <div class="mb-3 hidden md:block">
                          {% if not bonus.title %}
                            {%- include "components/bz-banner-hero.njk" -%}
                          {% else %}
                            {%- include "components/casinos/casino-bonus.njk" -%}
                          {% endif %}
                      </div>
                      {% endif %}

                    </div>
                  </aside>
                </div>

            </div>
        </div>
    </div>
</div>

{# <!-- DEBUG: Add extra space at bottom for scrolling -->
<div class="h-screen bg-gray-100 flex items-center justify-center">
  <div class="text-center text-gray-500">
    <p>üêõ Debug: Extra space for scrolling test</p>
    <p>Scroll up to test if the sidebar sticks</p>
  </div>
</div> #}
