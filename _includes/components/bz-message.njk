{% from "locale-fix.njk" import localeUrlFixDaisy with context %}
{%- set currentLangClass = languages[page.lang].menu.flagClass %}

<div class="border-b border-base-300 dark:border-gray-700 text-center text-xs px-2 md:px-0">
  <div class="max-w-6xl mx-auto text-base-content flex justify-end md:justify-between">
        <div class="hidden md:flex items-center text-xs text-neutral-400 pl-5">
            {{ languages[page.lang].texts.protectingPlayersSince }}
        </div>
      <ul class="flex justify-end px-2 md:px-0 items-center">
        {# Add casino button #}
        <li class="flex flex-row items-center">
          <a target="_blank" 
                class="hover:underline flex flex-row items-center"
                rel="nofollow noopener noreferrer" 
                href="{{ languages[page.lang].top.url }}" 
                onclick="gtag('event', 'click', { 
                    event_category: 'link', 
                    event_label: 'top-link', 
                    value: 1 
                });">
                <i data-lucide="circle-plus" strokeWidth={1} class="h-3 text-secondary"></i>
                {{ languages[page.lang].top.text }}
          </a>
        </li>

        <li class="text-neutral-content mx-3">/</li>

        {# About us  #}
        <li class="flex flex-row items-center">
          <a class="hover:underline flex flex-row items-center"
                href="{{ '/nosotros/' | locale_url }}">
                {{ languages[page.lang].texts.aboutUs }}
          </a>
        </li>  

        <li class="text-neutral-content mx-3">/</li>


        {# Theme Toggle #}
        <li class="flex flex-row items-center">
          <button onclick="const html = document.documentElement; const currentTheme = html.getAttribute('data-theme'); const newTheme = currentTheme === 'dark' ? 'cmyk' : 'dark'; html.setAttribute('data-theme', newTheme); localStorage.setItem('bz_theme', newTheme); this.textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';" 
                  class="btn btn-ghost btn-circle btn-xs hover:bg-base-200" 
                  title="Toggle theme">
            ‚òÄÔ∏è
          </button>
        </li>        


        <li class="text-neutral-content mx-3">/</li>

        {# Language #}
        <div class="gap-0 dropdown md:dropdown-end">
            <button class="btn btn-ghost btn-circle" popovertarget="popover-1" style="anchor-name:--anchor-1">
                <div class="indicator">
                    <i data-lucide="languages" class="h-4 md:h-4"></i>
                    <span class="badge badge-xs p-0 indicator-item">
                        {% if currentLangClass == "flag-icon-es" %}
                            <img src="/assets/imgs/flags/svg/ar.svg" class="h-4" alt="mx-flag" />
                        {% elif currentLangClass == "flag-icon-br"  %}
                            <img src="/assets/imgs/flags/svg/br.svg" class="h-4" alt="br-flag" />
                        {% else %}
                            <img src="/assets/imgs/flags/svg/gb.svg" class="h-4" alt="gb-flag" />
                        {% endif %}
                    </span>
                </div>
            </button>
            <ul class="dropdown-content menu menu-sm w-36 -left-26 rounded-box bg-base-100 shadow-sm"
            popover id="popover-1" style="position-anchor:--anchor-1">
                {{ localeUrlFixDaisy(fixLang=page.lang) }}

                {% for link in page.url | locale_links %}
                    <li>
                        
                        <a class="{{ languages[link.lang].menu.class }} text-xs" href="{{ link.url }}" lang="{{ link.lang }}" hreflang="{{ link.lang }}">


                            {% if languages[link.lang].menu.flagClass == "flag-icon-es" %}
                                <img src="/assets/imgs/flags/svg/ar.svg" class="h-4" alt="mx-flag" />
                            {% elif languages[link.lang].menu.flagClass == "flag-icon-br"  %}
                                <img src="/assets/imgs/flags/svg/br.svg" class="h-4" alt="br-flag" />
                            {% else %}
                                <img src="/assets/imgs/flags/svg/gb.svg" class="h-4" alt="gb-flag" />
                            {% endif %}

                            {{ languages[link.lang].menu.name }}
                        </a>
                    </li>
                {% endfor %}

            </ul>
        </div>        

      </ul>

    </div>
</div>
