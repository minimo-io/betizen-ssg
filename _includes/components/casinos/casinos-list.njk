{%- from "macros/reputation-button.njk" import reputationButton with context -%}
{% from "macros/voting-buttons.macro.njk" import votingButtons with context %}

{# Casinos filters #}
{% include "components/casinos/casinos-filter.njk" %}

{# Casinos table #}
<table class="table">
    <tbody>
        {% set counter = 0 -%}
        {% for post in postsList | sortByOrder %} 
            {% if post.data.details %}
                {% set counter = counter + 1 -%}
                {%- set logoPath -%}{{ metadata.images.casinos }}{{ post.fileSlug }}-logo.webp{%- endset -%}
                <tr>

                    {# Count #}
                    <th scope="row" class="px-0 py-5 md:py-4 text-center">#{{ counter }}</th>

                    {# Brand image #}
                    <td class="hidden md:block py-5 md:py-4">
                        <a href="{{ post.url }}">
                            <img
                                width="80"
                                src="{{ logoPath }}"
                                class="rounded-full"
                                alt="{{ post.data.slugOverride | slugify }}" />
                        </a>
                    </td>

                    {# Brand title #}
                    <td class="py-5 md:py-4">
                        <div>
                            <a
                                class="text-base-content text-sm md:text-lg flex flex-col md:flex-row items-center justify-center md:justify-start"
                                href="{{ post.url }}"
                                >
                                <img
                                    width="50"
                                    src="{{ logoPath }}"
                                    class="rounded-full w-[50px] h-[50px] md:hidden"
                                    alt="{{ post.data.slugOverride | slugify }}" />    

                                <div class="flex items-center justify-center flex-wrap md:justify-start prose md:prose-lg my-2">
                                    <span class="text-center md:text-xl leading-tight">{{ post.data.title }}</span>
                                </div>
                                
                                <div class="md:ml-2 mt-1 badge badge-soft badge-primary badge-md md:badge-lg">
                                    {{- post.data.score.toFixed(1) or "0.0" }}&nbsp;karma
                                </div>                        
                            </a>
                        </div>
                    </td>

                    {# Brand score #}
                    <td class="px-0 md:px-auto">
                        <div class="flex flex-col gap-1 justify-center items-center">
                            <div class="flex flex-col md:flex-row justify-center gap-2">

                                {{ votingButtons(post.fileSlug, true) }}

                            </div>
                        </div>
                    </td>

                    {# Actions #}
                    <td class="pr-0 md:pr-auto">
                        <div class="flex flex-col md:flex-row justify-center md:justify-end gap-2 items-center">

                            {# Blacklisted #}
                             {% if not post.data.blacklisted %}
                                {{ reputationButton(post.data.reputation.code, post.data.reputation.text, logoPath, post.data.title, post.data.gradient, post.data.bonus.link, false, "Xd-none Xd-md-block btn-scale") }}
                            {% endif %}

                            {# Visit / Blacklisted Button #}
                            {% if post.data.blacklisted %}
                                <a href="{{ post.url }}" class="btn btn-error btn-soft btn-sm md:btn-md">
                                    <i data-lucide="zoom-in" class="w-4 h-4"></i>
                                    <span>{{ languages[page.lang].texts.orderBlacklisted }}</span>
                                </a>
                            {% else %}
                                <div class="tooltip order-last" data-tip="{{ languages[page.lang].texts.earn }} +{{ config.karmaPoints }} {{ languages[page.lang].texts.points }}">
                                    <button
                                        data-earnurl="{{ post.data.bonus.link }}"
                                        class="btn-primary/20 btn btn-sm md:btn-md order-1 md:order-2"
                                        >
                                        <i data-lucide="external-link" strokeWidth={1} class="h-4"></i>
                                        {{ languages[page.lang].texts.visit }}
                                    </button>
                                </div>
                            {% endif %}
                        </div>
                    </td>
                </tr>

                
            {% endif %} 
        {% endfor %}
    </tbody>
</table>